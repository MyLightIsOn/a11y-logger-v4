create table public.vpat_version (
  id uuid not null default gen_random_uuid (),
  vpat_id uuid not null,
  version_number integer not null,
  published_by uuid not null,
  published_at timestamp with time zone not null default now(),
  wcag_scope jsonb not null,
  criteria_rows jsonb not null,
  export_artifacts jsonb null,
  constraint vpat_version_pkey primary key (id),
  constraint vpat_version_vpat_id_fkey foreign KEY (vpat_id) references vpat (id) on delete CASCADE
) TABLESPACE pg_default;

create unique INDEX IF not exists vpat_version_vpat_num_uniq on public.vpat_version using btree (vpat_id, version_number) TABLESPACE pg_default;

create index IF not exists vpat_version_vpat_idx on public.vpat_version using btree (vpat_id) TABLESPACE pg_default;
